{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/sql.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n\n############################################################################################################\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'DBAY/SQL'\n{ rpr\n  inspect\n  echo\n  log     }               = GUY.trm\ntypes                     = require './types'\n{ isa\n  validate\n  validate_optional\n  declare\n  size_of\n  type_of }               = types\nE                         = require './errors'\nGUY                       = require 'guy'\n\n\n#===========================================================================================================\nclass Sql\n\n  #---------------------------------------------------------------------------------------------------------\n  SQL: String.raw\n\n  #---------------------------------------------------------------------------------------------------------\n  I: ( name ) => '\"' + ( name.replace /\"/g, '\"\"' ) + '\"'\n\n  #---------------------------------------------------------------------------------------------------------\n  L: ( x ) =>\n    return 'null' unless x?\n    switch type = type_of x\n      when 'text'       then return  \"'\" + ( x.replace /'/g, \"''\" ) + \"'\"\n      # when 'list'       then return \"'#{@list_as_json x}'\"\n      when 'float'      then return x.toString()\n      when 'boolean'    then return ( if x then '1' else '0' )\n      # when 'list'       then throw new Error \"^dba@23^ use `X()` for lists\"\n    throw new E.DBay_sql_value_error '^dbay/sql@1^', type, x\n\n  #---------------------------------------------------------------------------------------------------------\n  V: ( x ) =>\n    throw new E.DBay_sql_not_a_list_error '^dbay/sql@2^', type, x unless ( type = type_of x ) is 'list'\n    return '( ' + ( ( @L e for e in x ).join ', ' ) + ' )'\n\n  #---------------------------------------------------------------------------------------------------------\n  interpolate: ( sql, values ) =>\n    idx = -1\n    return sql.replace @_interpolation_pattern, ( $0, opener, format, name ) =>\n      idx++\n      switch opener\n        when '$'\n          validate.nonempty_text name\n          key = name\n        when '?'\n          key = idx\n      value = values[ key ]\n      switch format\n        when '', 'I'  then return @I value\n        when 'L'      then return @L value\n        when 'V'      then return @V value\n      throw new E.DBay_interpolation_format_unknown '^dbay/sql@3^', format\n  _interpolation_pattern: /(?<opener>[$?])(?<format>.?):(?<name>\\w*)/g\n\n\n############################################################################################################\nmodule.exports = { sql: ( new Sql() ), }\n"
  ]
}